

金融核心程序设计与普通程序的区别.md


金融核心业务，转账 扣款 支付等与普通程序有这明显的区别


# 很强的规范性  openbank opie ，iso20022标准规范


# 强事务 使用数据库，不使用redis等缓存 保障数据一致性


# 锁 基本只用悲观锁，不使用乐观锁

# 数据库隔离级别 使用序列化隔离级别，最高等级

# 外键的强力使用 ，保证一致性
# 软删除机制
# 使用oracle mssql 代替mysql ，更高性能 和 事务
稳定性也不许

mssql 高度优化，支持复杂事务，符合金融级别要求

# 透明数据加密（TDE）

MySQL（5.7+ 支持表空间加密）

# 数据有效性规则包括数据类型检查、值域限制、唯一性约束以及业务逻辑验证等

# notnull


# wal日志规范

# 高精度计算与数据准确性Decimal
使用Decimal而非Float/Double：所有涉及金额的字段必须使用高精度的定点数类型，避免浮点误差。

金额单位采用分（厘）：通常不直接使用元为单位，避免小数计算误差。


# 流程明确状态机
明确的状态流转模型：如支付状态：待支付 -> 扣款中 -> 成功 / 失败 / 待确认，状态之间不可随意跳转。

# 幂等性保障机制：
系统需确保重复提交不会造成重复扣款或转账，通常设计幂等ID或事务流水号。

# 审计与可追溯性（Audit & Traceability）
操作留痕：几乎所有关键操作都需要详细记录日志，包括用户ID、时间、IP、操作前后数据等。

# 不可篡改日志： 链式签名
使用WORM（Write Once Read Many）存储或链式签名等手段确保审计日志不能被修改。



# 严格的测试与发布流程
必须通过全套金融级测试：包括单元测试、集成测试、性能测试、安全测试、回归测试。

上线需审批：一般需要经过多层级的审批（如开发、测试、运维、安全、合规等），并在非高峰期灰度发布。